Next.js 官方文档提供了使用 prismjs 的示例。你可以在 pages/_app.js 文件中引入 prismjs 的 CSS 样式和 JavaScript 文件，然后在 Component 中使用 useEffect 来高亮代码。

```ts
import 'prismjs/themes/prism-tomorrow.css';
import 'prismjs';

function MyApp({ Component, pageProps }) {
  useEffect(() => {
    // Call the highlightAll() function to style our code blocks
    Prism.highlightAll();
  }, []);

  return <Component {...pageProps} />;
}

export default MyApp;
```

这里我们使用了 prism-tomorrow 主题，你可以根据自己的需要选择其他主题。在 useEffect 中，我们调用了 Prism.highlightAll() 函数来高亮所有的代码块。


yntax Highlighting with Prism.js
Prism.js is a lightweight, extensible syntax highlighter that is used by many websites. Next.js has built-in support for Prism.js.

First, install prismjs:

```ssh
npm install prismjs
```

Then, create a new file called prism.js in the root of your project:


```js
// prism.js
import Prism from 'prismjs'

(typeof global !== 'undefined' ? global : window).Prism = Prism

require('prismjs/components/prism-markup')
require('prismjs/components/prism-javascript')
require('prismjs/components/prism-typescript')
require('prismjs/components/prism-jsx')
require('prismjs/components/prism-tsx')
require('prismjs/components/prism-css')
require('prismjs/components/prism-scss')
require('prismjs/components/prism-json')
require('prismjs/components/prism-yaml')
require('prismjs/components/prism-docker')
require('prismjs/components/prism-bash')
require('prismjs/components/prism-nginx')
require('prismjs/components/prism-diff')
require('prismjs/components/prism-git')
require('prismjs/components/prism-go')
require('prismjs/components/prism-graphql')
require('prismjs/components/prism-less')
require('prismjs/components/prism-makefile')
require('prismjs/components/prism-markdown')
require('prismjs/components/prism-nginx')
require('prismjs/components/prism-python')
require('prismjs/components/prism-ruby')
require('prismjs/components/prism-sql')
require('prismjs/components/prism-vim')
require('prismjs/components/prism-wasm')
require('prismjs/components/prism-yaml')
```


This file imports all the necessary Prism.js components and sets the global Prism object so that it can be used in your code.

Then, import the prism.js file in your _app.js file:

```js
// _app.js
import '../styles/globals.css'
import '../prism.js'

function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}

export default MyApp
```

Finally, wrap your code blocks in a pre tag with a className of language-*, where * is the language you want to highlight:


```js
<pre className="language-javascript">
  <code>
    {`function helloWorld() {
  console.log('Hello, world!');
}`}
  </code>
</pre>
```

This will highlight the code block with the JavaScript syntax.

Note that you can also use the Prism.highlightAll() method to highlight all code blocks on the page. You can call this method in your _app.js file:

```js
// _app.js
import '../styles/globals.css'
import '../prism.js'
import Prism from 'prismjs'

Prism.highlightAll()

function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}

export default MyApp
```

This will highlight all code blocks on the page automatically.

```ts
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
import dayjs from 'dayjs';
import { serialize } from 'next-mdx-remote/serialize';
import prism from 'remark-prism';
import externalLinks from 'remark-external-links';
import gfm from 'remark-gfm';
import imageSize from 'rehype-img-size';

const contentDirectory = path.join(process.cwd(), 'content');

export const getContentSlugList = (type) => fs.readdirSync(path.join(contentDirectory, type));

export const getBlogSlugList = () => getContentSlugList('blog');
export const getWeeklySlugList = () => getContentSlugList('weekly');

export const getContentSummaryBySlug = (type, slug) => {
  const fileContent = fs.readFileSync(path.join(contentDirectory, type, slug, 'index.md'), 'utf-8');
  const { data } = matter(fileContent);
  return {
    type,
    title: data.title,
    description: data.description,
    tags: data.tags,
    date: dayjs(data.date).format('YYYY-MM-DD'),
    slug,
  };
};

export const getContentList = (type) => {
  const slugs = getContentSlugList(type);
  return slugs
    .map((slug) => getContentSummaryBySlug(type, slug))
    .sort((a, b) => (dayjs(a.date).isBefore(dayjs(b.date)) ? 1 : -1));
};

export const getBlogList = () => getContentList('blog');
export const getWeeklyList = () => getContentList('weekly');

export const getAllList = () => {
  const blogList = getBlogList();
  const weeklyList = getWeeklyList();
  return [...blogList, ...weeklyList].sort((a, b) =>
    dayjs(a.date).isBefore(dayjs(b.date)) ? 1 : -1
  );
};

export const getContentBySlug = async (type, slug) => {
  const fileContent = fs.readFileSync(path.join(contentDirectory, type, slug, 'index.md'), 'utf-8');
  const { data, content } = matter(fileContent);
  return {
    title: data.title,
    date: dayjs(data.date).format('YYYY-MM-DD'),
    description: data.description,
    tags: data.tags || [],
    content: await serialize(content, {
      mdxOptions: {
        remarkPlugins: [prism, externalLinks, gfm],
        rehypePlugins: [[imageSize, { dir: 'public' }]],
      },
    }),
  };
};

export const getBlogBySlug = (slug) => getContentBySlug('blog', slug);
export const getWeeklyBySlug = (slug) => getContentBySlug('weekly', slug);
```